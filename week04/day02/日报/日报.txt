2020/06/25
	学习大纲：
		- MySql主从复制
		- MyCat读写分离
		- MyCat分库分表

	一.MySql主从复制
		1安装
			a、卸载预装mysql	
			b、上传安装包
			c、解压安装包
			d、复制mysql的配置文件
			e、修改my.cnf
			f、初始化数据库
			j、启动和关闭mysql
			h、配置mysql命令支持
			i、修改MySQL密码
			g、开放远程登录权限
			k、设置开机启动
		2、MySQL主从复制
		  需求分析：
			1. MySQL 默认支持主(master)从(slave)功能.
			2. 主从复制效果：在主数据库中操作时,从同步进行变化.
			3. 主从复制本质：主数据的操作写入到日志中,从数据库从日志中读取,进行操作.
			
		  主从备份要素：
			1. 开启日志功能
			2. 每个数据库需要有一个 server_id,主 server_id 值小于从server_id(标识从哪server写入的)
			3. 每个 mysql 都有一个 uuid,由于虚拟机直接进行克隆,需要修改uuid 的值(唯一识别码)
			4. 必须要在主数据库中有一个用户具有被从数据库操作的权限.
		  
		  上机操作
		  
	二、MyCat
		1、简介：
			MyCAT是一个数据库中间件。国产开源项目，前身是cobar项目。
				同时对 MySQL、Oracle、 SQL Server 等都支持
				
		2、MyCAT架构			
			MyCAT使用Mysql的通讯协议模拟成了一个Mysql服务器，所有能使用Mysql的客户端以及编程语言都能将MyCAT
			当成是Mysql Server来使用，不必开发新的客户端协议。
				
		3、MyCat分库分表	
			垂直分割（分库）：
				指按照业务将表进行分类，分布到不同的数据库上面，这样也就将数据或者说压力分担到不同的库上面	
			水平分割（分表）：
				一个表格的数据按照行分割到多个节点上，	
			典型的分片规则：	
				根据主键编号进行hash、求余
				
		4、MyCat安装	
			a、上传安装包
			b、解压安装包
			c、启动和关闭MyCat
				默认服务端口为8066
				
	三、Mycat分库分表和读写分离		
		1、需求：
			把商品表分片存储到两个数据节点上。
		
		2、MyCat重要概念
			1、逻辑库（schema）：一个包含了所有数据库的逻辑上的数据库
			
			2、逻辑表（table）：一个包含了所有表的逻辑上的表

			3、数据主机（dataHost）：数据库软件安装到哪个服务器上

			4、数据节点（dataNode）：数据库软件中的 database

			5、分片规则（rule）：拆分规则
		
		3、配置schema.xml
				Schema.xml作为MyCat中重要的配置文件之一，
			管理着MyCat的逻辑库、表、分片规则、DataNode以及DataSource。
		
		4、配置server.xml
			server.xml几乎保存了所有mycat需要的系统配置信息。最常用的是在此配置用户名、密码及权限。
			
		5、配置rule.xml（分片规则）
			crc32slot  规则		根据主键编号进行hash、求余
			注意事项：
				1）<columns>id</columns>中推荐配置主键列

				2）所有的 tableRule 只能使用一次。如果需要为多个表配置相同的分片规则，那么需要在此重新定义该规则。

				3) 要分片的数据库节点数量，必须指定，否则没法分片	
		
	四、测试	
		先创建库，在主数据库中分别创建db1、db2、db3数据库
		在插入数据
		再分库测试
		后项目测试
		
		
		
		